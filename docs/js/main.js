function Swipe(t,e){function i(){m=y.children,w=m.length,m.length<2&&(e.continuous=!1),p.transitions&&e.continuous&&m.length<3&&(y.appendChild(m[0].cloneNode(!0)),y.appendChild(y.children[1].cloneNode(!0)),m=y.children),v=new Array(m.length),g=t.getBoundingClientRect().width||t.offsetWidth,y.style.width=m.length*g+"px";for(var i=m.length;i--;){var n=m[i];n.style.width=g+"px",e.scale&&1==$(n).find("img").length&&$(n).find("img").css("height",g*e.scale+"px"),n.setAttribute("data-index",i),p.transitions&&(n.style.left=i*-g+"px",r(i,C>i?-g:C<i?g:0,0))}e.continuous&&p.transitions&&(r(s(C-1),-g,0),r(s(C+1),g,0)),p.transitions||(y.style.left=C*-g+"px"),t.style.visibility="visible"}function n(){e.continuous?o(C-1):C&&o(C-1)}function a(){e.continuous?o(C+1):C<m.length-1&&o(C+1)}function s(t){return(m.length+t%m.length)%m.length}function o(t,i){if(C!=t){if(p.transitions){var n=Math.abs(C-t)/(C-t);if(e.continuous){var a=n;n=-v[s(t)]/g,n!==a&&(t=-n*m.length+t)}for(var o=Math.abs(C-t)-1;o--;)r(s((t>C?t:C)-o-1),g*n,0);t=s(t),r(C,g*n,i||b),r(t,0,i||b),e.continuous&&r(s(t-n),-(g*n),0)}else t=s(t),c(C*-g,t*-g,i||b);C=t,f(e.callback&&e.callback(C,m[C]))}}function r(t,e,i){d(t,e,i),v[t]=e}function d(t,e,i){var n=m[t],a=n&&n.style;a&&(a.webkitTransitionDuration=a.MozTransitionDuration=a.msTransitionDuration=a.OTransitionDuration=a.transitionDuration=i+"ms",a.webkitTransform="translate("+e+"px,0)translateZ(0)",a.msTransform=a.MozTransform=a.OTransform="translateX("+e+"px)")}function c(t,i,n){if(!n)return void(y.style.left=i+"px");var a=+new Date,s=setInterval(function(){var o=+new Date-a;return o>n?(y.style.left=i+"px",E&&l(),e.transitionEnd&&e.transitionEnd.call(event,C,m[C]),void clearInterval(s)):void(y.style.left=(i-t)*(Math.floor(o/n*100)/100)+t+"px")},4)}function l(){x=setTimeout(a,E)}function u(){E=0,clearTimeout(x)}var h=function(){},f=function(t){setTimeout(t||h,0)},p={addEventListener:!!window.addEventListener,touch:"ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch,transitions:function(t){var e=["transitionProperty","WebkitTransition","MozTransition","OTransition","msTransition"];for(var i in e)if(void 0!==t.style[e[i]])return!0;return!1}(document.createElement("swipe"))};if(t){var m,v,g,w,y=t.children[0];e=e||{};var C=parseInt(e.startSlide,10)||0,b=e.speed||300;e.continuous=void 0===e.continuous||e.continuous;var x,T,E=e.auto||0,k={},N={},L={handleEvent:function(t){switch(t.type){case"touchstart":this.start(t);break;case"touchmove":this.move(t);break;case"touchend":f(this.end(t));break;case"webkitTransitionEnd":case"msTransitionEnd":case"oTransitionEnd":case"otransitionend":case"transitionend":f(this.transitionEnd(t));break;case"resize":f(i)}e.stopPropagation&&t.stopPropagation()},start:function(t){var e=t.touches[0];k={x:e.pageX,y:e.pageY,time:+new Date},T=void 0,N={},y.addEventListener("touchmove",this,!1),y.addEventListener("touchend",this,!1)},move:function(t){if(!(t.touches.length>1||t.scale&&1!==t.scale)){e.disableScroll&&t.preventDefault();var i=t.touches[0];N={x:i.pageX-k.x,y:i.pageY-k.y},"undefined"==typeof T&&(T=!!(T||Math.abs(N.x)<Math.abs(N.y))),T||(t.preventDefault(),u(),e.continuous?(d(s(C-1),N.x+v[s(C-1)],0),d(C,N.x+v[C],0),d(s(C+1),N.x+v[s(C+1)],0)):(N.x=N.x/(!C&&N.x>0||C==m.length-1&&N.x<0?Math.abs(N.x)/g+1:1),d(C-1,N.x+v[C-1],0),d(C,N.x+v[C],0),d(C+1,N.x+v[C+1],0)))}},end:function(t){var i=+new Date-k.time,n=Number(i)<250&&Math.abs(N.x)>20||Math.abs(N.x)>g/2,a=!C&&N.x>0||C==m.length-1&&N.x<0;e.continuous&&(a=!1);var o=N.x<0;T||(n&&!a?(o?(e.continuous?(r(s(C-1),-g,0),r(s(C+2),g,0)):r(C-1,-g,0),r(C,v[C]-g,b),r(s(C+1),v[s(C+1)]-g,b),C=s(C+1)):(e.continuous?(r(s(C+1),g,0),r(s(C-2),-g,0)):r(C+1,g,0),r(C,v[C]+g,b),r(s(C-1),v[s(C-1)]+g,b),C=s(C-1)),e.callback&&e.callback(C,m[C])):e.continuous?(r(s(C-1),-g,b),r(C,0,b),r(s(C+1),g,b)):(r(C-1,-g,b),r(C,0,b),r(C+1,g,b))),y.removeEventListener("touchmove",L,!1),y.removeEventListener("touchend",L,!1)},transitionEnd:function(t){parseInt(t.target.getAttribute("data-index"),10)==C&&(E&&l(),e.transitionEnd&&e.transitionEnd.call(t,C,m[C]))}};return i(),E&&l(),p.addEventListener?(p.touch&&y.addEventListener("touchstart",L,!1),p.transitions&&(y.addEventListener("webkitTransitionEnd",L,!1),y.addEventListener("msTransitionEnd",L,!1),y.addEventListener("oTransitionEnd",L,!1),y.addEventListener("otransitionend",L,!1),y.addEventListener("transitionend",L,!1)),window.addEventListener("resize",L,!1)):window.onresize=function(){i()},{setup:function(){i()},slide:function(t,e){u(),o(t,e)},prev:function(){u(),n()},next:function(){u(),a()},stop:function(){u()},getPos:function(){return C},getNumSlides:function(){return w},kill:function(){u(),y.style.width="",y.style.left="";for(var t=m.length;t--;){var e=m[t];e.style.width="",e.style.left="",p.transitions&&d(t,0,0)}p.addEventListener?(y.removeEventListener("touchstart",L,!1),y.removeEventListener("webkitTransitionEnd",L,!1),y.removeEventListener("msTransitionEnd",L,!1),y.removeEventListener("oTransitionEnd",L,!1),y.removeEventListener("otransitionend",L,!1),y.removeEventListener("transitionend",L,!1),window.removeEventListener("resize",L,!1)):window.onresize=null}}}}$(function(){FastClick.attach(document.body)});var massCfg={tap:"touchstart",click:"click",hideClass:"fn-hide"};!function(t){t.mCfg={$document:t(document),$win:t(window),$body:t("body"),$wrapper:t(".wrapper"),$mask:t(".masks"),hideClass:"fn-hide"},t.mCfg.wH=document.documentElement.clientHeight,t.mCfg.wW=document.documentElement.clientWidth,t.mCfg.bH=t.mCfg.$body.height()}(Zepto),function(t,e,i){function n(e){e=t.extend({control:"[data-role=aside]",aside:".aside",timer:200},e);var i=this;i.cfg=e,i.control=e.control,i.$mask=t(".masks"),i.$aside=t(i.cfg.aside),i.$curAside=t(i.cfg.aside),i.scrollTop=0,i.init(),i.event()}var a=t("[data-role=aside]");n.prototype.init=function(){var e=this;t.mCfg.$body.data("aside-zIndex","10000"),e.$aside.data("isClose",!0),e.$mask.data("isClose",!0),e.open(),e.close()},n.prototype.event=function(){t.mCfg.$document.on("touchmove",".aside > *:not(.aside-main)",function(t){t.preventDefault()}),t.mCfg.$document.on("touchmove",".aside-main",function(e){var i=t(this),n=0;i.children().each(function(){n+=t(this).height()}),n+100<=i.parents(".aside").height()&&e.preventDefault()})},n.prototype.tpl=function(t,e){var i="<aside class='aside "+t+"'>";return i+="<nav class='nav-final'>",i+="<p>"+e+"</p>",i+="<a class='back' href='#'><i class='iconfont icon-arrow-left'></i></a>",i+="</nav>",i+="<section class='aside-main'>",i+="</section>",i+="</aside>"},n.prototype.open=function(){var e=this;t.mCfg.$body.on("click",e.control,function(i){var n=t(this),a=n.data("relation"),s=n.data("url");n.parents(".aside").length<=0&&(e.scrollTop=t(window).scrollTop()),e.$curAside=t(a?"."+a:e.cfg.aside),e.cfg.timer=n.data("time")||e.cfg.timer;var o=!!n.data("title")==!0?n.data("title"):n.text();e.$curAside.length<=0?(t.mCfg.$body.append(e.tpl(a,o)),e.$curAside=t("."+a),e.$aside=t(".aside"),e.$aside.data("isClose",!0),e.$mask=t(".masks"),e.$mask.data("isClose",!0)):e.$curAside=t(a?"."+a:e.cfg.aside),e.$mask.length<=0&&(t.mCfg.$body.append("<div class='masks fn-hide'></div>"),e.$mask=t(".masks"));var r=e.$curAside.find(".nav-final p");r.html(o),t("html, body, .wrapper").css({height:"100%",overflow:"hidden"}),e.$mask.removeClass(t.mCfg.hideClass),e.$curAside.removeClass(t.mCfg.hideClass),e.slide(e.$curAside,n,s)})},n.prototype.slide=function(e,i,n){var a=this,s=e.data("isClose"),o=e.data("his-url");if(n&&(!o||o&&o!=n)&&a.ajax(e,i,n),s){a.$mask.animate({opacity:1},a.cfg.timer,"ease-in-out");var r=parseInt(t.mCfg.$body.data("aside-zIndex"));e.css({zIndex:r+1}),e.animate({translate3d:"0, 0, 0"},a.cfg.timer,"ease-in-out",function(){e.data("isClose",!1),t.mCfg.$body.data("aside-zIndex",r+1),a.$mask.data("isClose",!1).removeClass(t.mCfg.hideClass)})}},n.prototype.close=function(){var e=this;t.mCfg.$document.on("click",".masks, .aside-close",function(i){i.preventDefault(),e.cfg.timer=t(this).data("time")||e.cfg.timer,e.closeAll()}),t.mCfg.$document.on("click",".aside .back, .aside-back",function(i){i.stopPropagation(),i.preventDefault();var n=t(this).parents(".aside");e.cfg.timer=t(this).data("time")||e.cfg.timer,n.animate({translate3d:"100%, 0, 0"},e.cfg.timer,"ease-in-out",function(){n.data("isClose",!0)});var a=e.$aside.length;e.$aside.each(function(){1==t(this).data("isClose")&&--a}),1===a&&(e.$mask.data("isClose",!0).animate({opacity:0},e.cfg.timer,"ease-in-out",function(){e.$mask.addClass(t.mCfg.hideClass)}),t("html, body, .wrapper").css({height:"auto","overflow-x":"hidden","overflow-y":"auto"}),document.documentElement.scrollTop=document.body.scrollTop=e.scrollTop)})},n.prototype.closeAll=function(e){var i=this,n=0;i.$mask.data("isClose")===!1&&t(".aside").each(function(){t(this).data("isClose")===!1&&(t(this).animate({translate3d:"100%, 0, 0"},i.cfg.timer,"ease-in-out",function(){t(".aside").data("isClose",!0),document.documentElement.scrollTop=document.body.scrollTop=i.scrollTop}),i.$mask.data("isClose",!0).animate({opacity:0},i.cfg.timer,"ease-in-out",function(){i.$mask.addClass(t.mCfg.hideClass),e&&0==n&&(e(),++n)}))}),t("html, body, .wrapper").css({height:"auto","overflow-x":"hidden","overflow-y":"auto"})},n.prototype.ajax=function(e,n,s){t.ajax({type:"get",url:s,dataType:"true"==a.attr("data-template")?"json":"text",success:function(t){if(t){var n=e.find(".aside-main");n.length?"true"==a.attr("data-template")?(console.log(t),i(a.attr("data-relation"),t)):n.html(t):e.html(t),e.data("his-url",s)}},error:function(t,e,i){console.log("ajax error")}})},a.length>0&&(t.aside=new n)}(Zepto,"",template),function(t,e){"use strict";var i=function(e,i){this.oJumpTarget=e,this.$oCaption=t(this.oJumpTarget).find("[data-tips]"),i=t.extend({titCell:"quickJump",tips:!0,tipsName:"jump-tips"},i),this.titCell=i.titCell,this.tips=i.tips,this.tipsName=i.tipsName,this.init()};i.prototype.init=function(){this.render(),this.handle()},i.prototype.render=function(){var t=document.createElement("div");t.className=this.titCell;var e=document.createElement("ul");e.className="jump-ul";for(var i=0;i<this.$oCaption.length;i++){var n=this.$oCaption[i],a=n.id,s=n.getAttribute("data-tips");e.innerHTML+='<li class="jump-li" data-view="'+a+'">'+s+"</li>"}t.appendChild(e),this.oJumpTarget.appendChild(t)},i.prototype.handle=function(){function e(e,i,n,a){clearTimeout(e),e=setTimeout(function(){var e=i.changedTouches[0].clientX,d=i.changedTouches[0].clientY,c=document.elementFromPoint(e,d);if(t(c).hasClass("jump-li"))s=e,o=d,r=c;else{var l=r.parentNode.getBoundingClientRect(),u=l.left,h=l.right,f=l.top,p=l.bottom;(u>=e||e>=h)&&(f>=d||d>=p)?c=document.elementFromPoint(s,o):u>=e||e>=h?c=document.elementFromPoint(s,d):(f>=d||d>=p)&&(c=document.elementFromPoint(e,o))}var m=c.getAttribute("data-view");if(m){var v=document.getElementById(m);v.scrollIntoView(),n&&(a.innerHTML=v.getAttribute("data-tips"),a.style.display="block")}},10)}var i=this,n=null,a=t("."+this.titCell),s=0,o=0,r=null;a.on("touchstart touchmove",".jump-li",function(t){t.preventDefault(),t.stopPropagation(),e(n,t,i.tips,i.oTips)}),this.tips&&(a.append('<div class="'+this.tipsName+'"></div>'),this.oTips=document.querySelector("."+this.tipsName),a.on("touchend",".jump-li",function(){clearTimeout(n),n=setTimeout(function(){i.oTips.style.display=""},100)}))},i.prototype.destroy=function(){var e=t("."+this.titCell);e.off("touchstart touchmove touchend").remove(),t("."+this.tipsName).remove()},t.mCfg.$body.on(e.tap,".aside-main-area",function(){var e=$(this);e.hasClass("upXXX")||($(this).addClass("upXXX"),t('[data-role="quickjump"]').each(function(){var e=t(this).data("titcell"),n=t(this).data("tips"),a=t(this).data("tipsname");new i(this,{titCell:e||"quickJump",tips:n,tipsName:a||"jump-tips"})}))})}(Zepto,massCfg),!function(t,e){"use strict";var i=function(e,i){i=t.extend({container:".container",open:"slideIn",close:"slideOut"},i),this.$containerNode=t(i.container),this.$contentNode=function(t){var e=t.$containerNode.children().first();return e.is("[data-side-content]")||(e=t.$containerNode.wrapInner("<div data-side-content>").children().first()),e}(this),this.$switchTarget=t("[data-side-target="+i.target+"]"),this.$panelNode=t(e),this.$viewNode=this.$panelNode.find("[data-side-view]"),this.$closeNode=this.$panelNode.find("[data-side-close]"),this.$maskNode=this.$panelNode.find("[data-side-mask]"),this.openClass=i.open,this.closeClass=i.close,this.$delay=function(t){if(!i.delay)return!1;var e,n=i.delay;return e="true"===n?t.$panelNode:"view"===n?t.$viewNode:"mask"===n&&t.$maskNode}(this),this.direct=!!this.$viewNode.data("side-view")&&this.$viewNode.data("side-view"),this._EventHandle=t({}),this.init()};i.prototype.on=function(){this._EventHandle.on.apply(this._EventHandle,arguments)},i.prototype.off=function(){this._EventHandle.off.apply(this._EventHandle,arguments)},i.prototype.trigger=function(){this._EventHandle.trigger.apply(this._EventHandle,arguments)},i.prototype.init=function(){this.handle(),this.direct&&this.touch()},i.prototype.handle=function(){this.$switchTarget.on("click",this.open.bind(this)),this.$closeNode.on("click",this.close.bind(this))},i.prototype.open=function(){function e(){this.clientHeight!==document.documentElement.clientHeight&&(this.clientHeight=document.documentElement.clientHeight,t("body").css({height:this.clientHeight,overflow:"hidden"}).scrollTop(0))}this.trigger("open"),t(window).on("resize.sideReset, orientationchange.sideReset",e.bind(this)),this.clientHeight=document.documentElement.clientHeight,this.scrollTop=document.body.scrollTop,t("body").css({height:this.clientHeight,overflow:"hidden"}),this.$contentNode.css({"-webkit-transform":"translate3d(0,-"+this.scrollTop+"px,0)",transform:"translate3d(0,-"+this.scrollTop+"px,0)"}),this.$maskNode.on("touchmove",function(t){t.preventDefault(),t.stopPropagation()}),this.$panelNode.removeClass(this.closeClass).addClass(this.openClass).css("display","block");var i=this,n=null,a=!1,s=this.$viewNode.css(t.fx.cssPrefix+"animation-name");if(s){if(clearTimeout(n),this.$viewNode.off(t.fx.animationEnd),"none"!==s)return void this.$viewNode.on(t.fx.animationEnd,function(t){a||t.target!==t.currentTarget||(a=!0,i.trigger("openEnd"))});var o=this.$viewNode.css(t.fx.cssPrefix+"animation-duration"),r=this.$viewNode.css(t.fx.cssPrefix+"animation-delay"),d=parseInt(o,10),c=parseInt(r,10);d*=o.indexOf("ms")>0?1:1e3,c*=r.indexOf("ms")>0?1:1e3,n=setTimeout(function(){a||i.trigger("openEnd")},d+c)}else this.trigger("openEnd")},i.prototype.close=function(){function e(){i.$panelNode.css("display","none"),i.$contentNode.css({"-webkit-transform":"",transform:""}),t("body").css({height:"",overflow:"",position:"",width:""}).scrollTop(i.scrollTop),i.$maskNode.off("touchmove"),t(window).off("resize.sideReset, orientationchange.sideReset"),i.trigger("closeEnd")}var i=this,n=null,a=!1;if(this.trigger("close"),this.$panelNode.removeClass(this.openClass).addClass(this.closeClass),this.$delay){if(clearTimeout(n),this.$delay.off(t.fx.animationEnd),"none"!==this.$delay.css(t.fx.cssPrefix+"animation-name"))return void this.$delay.on(t.fx.animationEnd,function(t){a||t.target!==t.currentTarget||(a=!0,e())});var s=this.$delay.css(t.fx.cssPrefix+"animation-duration"),o=this.$delay.css(t.fx.cssPrefix+"animation-delay"),r=parseInt(s,10),d=parseInt(o,10);r*=s.indexOf("ms")>0?1:1e3,d*=o.indexOf("ms")>0?1:1e3,n=setTimeout(function(){a||e()},r+d)}else e()},i.prototype.touch=function(){function t(t){n=!1,a=t.targetTouches[0].pageX,s=Math.floor(i.$viewNode.width()/2)}function e(t){if(!n){var e=t.targetTouches[0].pageX-a;if(Math.abs(e)>=s){var o=e>0?"right":"left";o===i.direct&&(n=!0,i.close())}}}this.$viewNode.on("touchstart",t).on("touchmove",e);var i=this,n=!0,a=0,s=0},i.prototype.destroy=function(){this.close(),this.$switchTarget.off("click"),this.$closeNode.off("click"),this.isSliding&&this.$viewNode.off("touchstart").off("touchmove")},t("[data-role-side]").each(function(){var e=t.parseJSON(this.getAttribute("data-role-side"));window.side=window.side||{},window.side[e.name]=new i(this,e)})}(Zepto,massCfg),(window.jQuery||window.Zepto)&&!function(t){t.fn.Swipe=function(e){return this.each(function(){t(this).data("Swipe",new Swipe(t(this)[0],e))})};var e=t("[data-role=carousel]");e.each(function(){var e=t(this),i=e.data("speed")||300,n=e.data("start")||0,a=e.data("autoplay"),s=0==a?0:e.data("timeout")||3e3,o=(t(this).data("stopPropagation")||!1,e.data("type")||1),r=e.data("scale"),d=e.data("def-img")||"http://x.autoimg.cn/2scimg/m/20160427/def-upload-"+(r||"4x3")+".png",c=e.find(".pos"),l=e.find(".carousel").children(),u=l.length;if(c.length>0&&1==o)c.find("span").replaceWith("<span><b>"+(u>0?n+1:0)+"</b>/<em>"+u+"</em></span>");else if(c.length>0&&2==o){var h="",f=0;for(f;f<u;f++)h+="<span "+(f==n?"class='active'":"")+"></span>";c.addClass("carousel-nav").html(h)}if(3==o||1==o){var p=!1;if(e.find(".c-item").each(function(){var e=t(this),i=e.data("title");i&&(p=!0)}),3==o)e.after(c.addClass("carousel-nav-03")),e.append("<p class='carousel-info'>"+(e.find(".c-item:nth-of-type(1)").data("title")||"")+"</p>");else{var m=[];m.length=u,c.css({width:16*u,marginLeft:-(16*u/2)}).html("<b>"+m.join("</b><b>")+"</b>"),c.find("b").eq(0).addClass("on")}}e.find(".c-item").eq(0).find("img[data-src-load]").each(function(){var e=t(this);e.attr("src",e.data("src-load")).on("error",function(){t(this).attr("src",d)});var i=e.parents(".c-item").next();i.length&&i.find("img[data-src-load]").each(function(){var e=t(this);e.attr("src",e.data("src-load")).on("error",function(){t(this).attr("src",d)})})}),e.Swipe({startSlide:n,speed:i,auto:s,scale:!!r&&(!!r.split("x")&&r.split("x")[1]/r.split("x")[0]),continuous:!1,disableScroll:!1,stopPropagation:!1,callback:function(t,e){},transitionEnd:function(i,n){if(1==o){e.find(".c-item:nth-of-type("+(i+1)+")")}else 2==o?c.find("span").removeClass("active"):3==o&&e.find(".carousel-info").html(e.find(".c-item:nth-of-type("+(i+1)+")").data("title")||"");u<=2?1==o||3==o?c.find("span").find("b").html(i>u-1?i-u+1:i+1):c.find("span:nth-of-type("+(i>u-1?i-u+1:i+1)+")").addClass("active"):1==o||3==o||c.find("span:nth-of-type("+(i+1)+")").addClass("active");var a=function(e){if(e.length>0){var i=[];e.each(function(e,n){var a=t(n);a.attr("src")&&a.attr("src")==a.data("src-load")||i.push(a)});i.length;t.each(i,function(e){i[e].attr({src:i[e].data("src-load")}).on("error",function(){t(this).attr("src",d)})})}};c.find("b").eq(i).addClass("on").siblings("b").removeClass("on"),a(t(n).find("img[data-src-load]"));var s=t(n).next();s.length&&a(s.find("img[data-src-load]"))}})})}(window.jQuery||window.Zepto);