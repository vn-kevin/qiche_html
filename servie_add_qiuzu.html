<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>发布求租信息</title>
	<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1.0,user-scalable=no"/>  
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="format-detection" content="telephone=no" />
    
    <link rel="stylesheet" href="src/css/style.css">
    <link rel="stylesheet" href="src/css/parameter.css">
   
</head>
<body>
	<section class="wrapper search-box">
     <nav class="nav-final">
          <p>发布求租信息</p>
          <a class="back js-back" href="javascript:void(0)"><i class="iconfont">&#xe60e;</i></a>
    </nav>
    <section class="form-main">
     <div class="bk_">
        <div class="form-skip">
            <span class="skip-tt">施工地点</span>          
            <a id="workAdd" class="siftdd brand" href="javascript:;" >请选择您所在的城市
                <i class="iconfont">&#xe60f;</i>
            </a>       
        </div>
        <div class="form-skip">
            <span class="skip-tt">机械类型</span>          
            <a id="workType" class="siftdd brand" href="javascript:;" >请选择您机械类型
                <i class="iconfont">&#xe60f;</i>
            </a>   
        </div>
        <div class="form-input">
          <span class="input-tt">规格要求</span>
          <input id="wordGg" type="text" placeholder="请填写机械品牌或者规格要求">
        </div>
        <div class="form-input">
          <span class="input-tt">数  量</span>
          <input id="workNumber" type="number" placeholder="请填写需租设备的数量">
          <strong class="unit">台</strong>
        </div>
        <div class="form-input">
          <span class="input-tt">工  期</span>
          <input type="text" placeholder="请填写您的工期">
          <strong class="unit">天</strong>
        </div>
        <div class="form-input">
          <span class="input-tt">最迟进场</span>
          <label for="mtime">请选择最迟进场时间</label>
          <input class="date-input" type="date" id="mtime" style="height:49px;" >
        </div>
      </div>
      <div class="bk_">
        <div class="form-input">
              <span class="input-tt">租凭价格</span>          
                <input type="text" placeholder="请填写价格，不填写默认面议" style="width:200px;">
                <i class="iconfont">&#xe60f;</i>
              <div class="date-input unit" id="jstxt" data-i='0' style="right:1.5rem;">
                元/月
              </div>
          </div>
          <div class="form-skip">
              <span class="skip-tt">结款方式</span>          
              <span class="js">
              <select class="date-input">
                <option selected='selected'>请选择结款方式</option>
                <option value="0">现款</option>
                <option value="1">结束付款</option>
                <option value="2">双方协议</option>
              </select>
                  <i class="iconfont">&#xe60f;</i>
              </span>        
          </div>
          <div class="form-input">
              <span class="input-tt fast_tit">状  态</span>
              <div class="fast vtabs">
                <button class="btn primary">求租中</button>
                <button class="btn loading">已完工</button>
              </div>
          </div>
          <div class="form-input">
              <span class="input-tt">详情描述</span>
              <div class="fast div" contenteditable="true" >请简单介绍一下您的一些需求,以方便别人更快向您提供设备</div>

              <div class="clearfix t_imgs">
                           <span class="is endis" >
                            <input type="file" class="files" accept=".gif,.jpg,.jpeg,.png" id="btnupload">
                             <i class="iconfont add">&#xe603;</i>
                           </span>
              </div>
          </div>
      </div>
      <div class="bk_">
          <div class="form-input">
            <span class="input-tt">联 系 人</span>
            <input type="text"  placeholder="请填写您的姓名">
          </div>
          <div class="form-input">
            <span class="input-tt">手 机 号</span>
            <input type="tel" id="mobile" maxlength="11" placeholder="请填写常用手机号">
          </div>
        </div>
      <button class="btn full primary mbtn">一键发布</button>

      <div class="filter-cont" id="all_workAdd">
               <ul class="list-line w_50 tit">
                 <li data-v="1">海南</li>
                 <li data-v="2">河南</li>
                 <li data-v="3">湖北</li>
                 <li data-v="4">湖南</li>
                 <li data-v="5">广东</li>
                 <li data-v="6">黑龙江</li>
                 <li data-v="1">海南</li>
                 <li data-v="2">河南</li>
                 <li data-v="3">湖北</li>
                 <li data-v="4">湖南</li>
                 <li data-v="5">广东</li>
                 <li data-v="6">黑龙江</li>
               </ul>
               <ul class="list-line w_50 bg">
               </ul>
      </div>
      <div class="filter-cont" id="all_workType">
               <ul class="list-line w_50 tit">
                 <li data-v="all" class="active">全部</li>
                 <li data-v="1">土方机械</li>
                 <li data-v="2">路面机械</li>
                 <li data-v="3">起重机械</li>
                 <li data-v="4">混泥土机械</li>
                 <li data-v="5">桩工机械</li>
               </ul>
               <ul class="list-line w_50 bg">
               </ul>
       </div>
      <div class="filter-mask"></div>
    </section>
  </section>
    
   

    <script src="src/js/zepto-1.2.min.js"></script>
    <script src="src/js/fastclick.min.js"></script>
    <script src="src/js/main.js"></script>
    <script>
      $(function(){
          $('.js-back').on('click', function() {
            history.go(-1);
          });

          //label
          $('#mtime,#mtime1').on('change', function() {
            $('label[for=' + $(this).attr('id') + ']').text('');
          });
          //vtabs
          $('.vtabs .btn').click(function() {
            $(this).attr('class', 'btn primary').siblings('.btn').attr('class', 'btn loading');
          });

          $('.block-brands-cont').on('click', 'li', function() {
            $(this).addClass('active').siblings('li').removeClass('active');
            $('#workType').html($(this).text().split(' ')[0] + '<i class="iconfont">&#xe60f;</i>')
            $.aside.closeAll()
          });
          $('.block-area').on('click', 'li', function() {
            $(this).addClass('active').siblings('li').removeClass('active');
            $('#workAdd').html($(this).text().split(' ')[0] + '<i class="iconfont">&#xe60f;</i>')
            $.aside.closeAll()
          });
          //text
          $('#jstxt').click(function(){
            var i=$(this).attr('data-i');
            if(i==0){
              $(this).text('元/班台');
              $(this).attr('data-i',1);
            }else{
               $(this).text('元/月');
               $(this).attr('data-i',0);
            }
          })

          //选择所在地&&机械类型
          var clearAll = function() {
            $('#all_workAdd,#all_workType,.filter-mask').hide();
            $('body').removeAttr('style')
            $('#all_workType').removeAttr('style')
            $('#all_workAdd').removeAttr('style')
            $('.form-skip').removeAttr('style')
          }
          var dos = function(opts) {
            $(opts.id).on('click', '.tit li', function() {
              var _this = $(this);
              _this.addClass('active').siblings().removeClass('active');
              $.ajax({
                url: opts.url + $(this).attr('data-v'),
                type: 'get',
                dataType: "html",
                success: function(data) {
                  $(opts.id + '>.bg').css({
                    left: '50%'
                  }).html(data).scrollTop(0)
                }
              });
            });
            $(opts.id).on('click', '.bg li', function() {
              $(this).addClass('on').siblings().removeClass('on');
              $('#' + opts.id.split('_')[1]).text($(this).text());
              clearAll();
            });
          }
          dos({
            id: '#all_workAdd',
            url: '/src/json/citys.js?id='
          });
          dos({
            id: '#all_workType',
            url: '/src/json/jxlx.json?id='
          });
          $('#workAdd').click(function() {
            $(this).parents('.form-skip').css('z-index', 4);
            $('#all_workAdd').css('top', $(this).offset().top + $(this).height()).show();
            $('.filter-mask').show();
            $('body').css('overflow', 'hidden')
          });
          $('#workType').click(function() {
            $(this).parents('.form-skip').css('z-index', 4);
            $('#all_workType').css('top', $(this).offset().top + $(this).height()).show();
            $('.filter-mask').show();
            $('body').css('overflow', 'hidden')
          });

          //上传
          document.getElementById('btnupload').addEventListener('change',readFile,false);
          function readFile(){
               var file = this.files[0];
               var reader = new FileReader();
                reader.readAsDataURL(file);
                reader.onload = function(e){
                    $('.endis').before('<span class="is"><img src="'+this.result+'" width="100%"><i class="iconfont del"></i></span>')
                }
          };
          $(document).on('click','.t_imgs .del',function(){
              $(this).parents('.is').remove();
          });
      });
    </script>
</body>
</html>